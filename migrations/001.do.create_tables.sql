DROP TYPE IF EXISTS status;
CREATE TYPE status AS ENUM ('published','unpublished');

CREATE TABLE draftlings (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    title TEXT NOT NULL,
    content TEXT,
    wordcount TEXT,
    genre TEXT,
    modified TIMESTAMPTZ DEFAULT now() NOT NULL,
    status status default 'unpublished'
);

CREATE TABLE freeformcrits (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    opening TEXT,
    critfreeform TEXT NOT NULL,    
    draftling_id INTEGER REFERENCES draftlings(id) ON DELETE CASCADE NOT NULL

);

CREATE TABLE templatedcrits (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    plot TEXT,
    pov TEXT,
    characters TEXT,
    dialogue TEXT,
    gramspell TEXT,
    overall TEXT,
    draftling_id INTEGER REFERENCES draftlings(id) ON DELETE CASCADE NOT NULL
);
